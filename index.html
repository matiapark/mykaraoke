function setupMediaRecorder(songForRecording) {
            // ... (기존 코드 생략) ...
            mediaRecorder.onstop = () => {
                if (isStoppingManually) {
                    resetState();
                    return; 
                }
                
                const resultArea = document.getElementById('resultArea');
                const customAudioControls = document.getElementById('custom-audio-controls');
                resultArea.style.display = 'block';
                resultArea.querySelector('h4').textContent = '녹음 완료! (결과 확인)';
                const audioPlayer = document.getElementById('recordedAudio');
                
                const blob = new Blob(recordedChunks, { type: 'audio/webm' });
                const url = URL.createObjectURL(blob);
                audioPlayer.src = url;

                customAudioControls.style.display = 'flex';
                
                // ★★★ 버튼 상태 변경 로직 추가 ★★★
                startBtn.disabled = true; // '시작' 버튼 비활성화
                stopBtn.disabled = false; // '중단' 버튼 활성화
                
                // ... (이하 기존 코드 생략) ...
            };
        }